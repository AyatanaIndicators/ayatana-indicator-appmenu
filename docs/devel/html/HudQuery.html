<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>HudQuery</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="index.html" title="hud-service Hacking Guide">
<link rel="up" href="ch03.html" title="Queries, Results, Items">
<link rel="prev" href="HudResult.html" title="HudResult">
<link rel="next" href="ch04.html" title="Sources">
<meta name="generator" content="GTK-Doc V1.18 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="HudResult.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch03.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">hud-service Hacking Guide</th>
<td><a accesskey="n" href="ch04.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#HudQuery.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#HudQuery.description" class="shortcut">Description</a>
                   | 
                  <a href="#HudQuery.object-hierarchy" class="shortcut">Object Hierarchy</a>
                   | 
                  <a href="#HudQuery.signals" class="shortcut">Signals</a>
</td></tr>
</table>
<div class="refentry">
<a name="HudQuery"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="HudQuery.top_of_page"></a>HudQuery</span></h2>
<p>HudQuery — a stateful query against a <a class="link" href="HudSource.html" title="HudSource"><span class="type">HudSource</span></a></p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="HudQuery.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">                    <a class="link" href="HudQuery.html#HudQuery-struct" title="HudQuery">HudQuery</a>;
<span class="returnvalue">void</span>                <a class="link" href="HudQuery.html#hud-query-close" title="hud_query_close ()">hud_query_close</a>                     (<em class="parameter"><code><a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> *query</code></em>);
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="returnvalue">guint</span></a>               <a class="link" href="HudQuery.html#hud-query-get-n-results" title="hud_query_get_n_results ()">hud_query_get_n_results</a>             (<em class="parameter"><code><a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> *query</code></em>);
<a href="http://library.gnome.org/devel/glib/unstable/glib-GVariant.html#GVariant"><span class="returnvalue">GVariant</span></a> *          <a class="link" href="HudQuery.html#hud-query-get-query-key" title="hud_query_get_query_key ()">hud_query_get_query_key</a>             (<em class="parameter"><code><a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> *query</code></em>);
<a class="link" href="HudResult.html" title="HudResult"><span class="returnvalue">HudResult</span></a> *         <a class="link" href="HudQuery.html#hud-query-get-result-by-index" title="hud_query_get_result_by_index ()">hud_query_get_result_by_index</a>       (<em class="parameter"><code><a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> *query</code></em>,
                                                         <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="type">guint</span></a> i</code></em>);
<a class="link" href="HudQuery.html" title="HudQuery"><span class="returnvalue">HudQuery</span></a> *          <a class="link" href="HudQuery.html#hud-query-lookup" title="hud_query_lookup ()">hud_query_lookup</a>                    (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-GVariant.html#GVariant"><span class="type">GVariant</span></a> *query_key</code></em>);
<a class="link" href="HudQuery.html" title="HudQuery"><span class="returnvalue">HudQuery</span></a> *          <a class="link" href="HudQuery.html#hud-query-new" title="hud_query_new ()">hud_query_new</a>                       (<em class="parameter"><code><a class="link" href="HudSource.html" title="HudSource"><span class="type">HudSource</span></a> *source</code></em>,
                                                         <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *search_string</code></em>,
                                                         <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"><span class="type">gint</span></a> num_results</code></em>);
</pre>
</div>
<div class="refsect1">
<a name="HudQuery.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="synopsis">
  <a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject">GObject</a>
   +----HudQuery
</pre>
</div>
<div class="refsect1">
<a name="HudQuery.signals"></a><h2>Signals</h2>
<pre class="synopsis">
  "<a class="link" href="HudQuery.html#HudQuery-changed" title='The "changed" signal'>changed</a>"                                        : <a href="http://library.gnome.org/devel/gobject/unstable/gobject-Signals.html#G-SIGNAL-RUN-LAST:CAPS"><code class="literal">Run Last</code></a>
</pre>
</div>
<div class="refsect1">
<a name="HudQuery.description"></a><h2>Description</h2>
<p>
<a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> is a stateful query for a particular search string against
a given <a class="link" href="HudSource.html" title="HudSource"><span class="type">HudSource</span></a>.
</p>
<p>
The query monitors its source for the "change" signal and re-submits
the query when changes are reported.  The query has its own change
signal that is fired when this happens.
</p>
<p>
The query maintains a list of results from the search which are
sorted by relevance and accessible by index.  Contrast this with the
stateless nature of <a class="link" href="HudSource.html" title="HudSource"><span class="type">HudSource</span></a>.
</p>
</div>
<div class="refsect1">
<a name="HudQuery.details"></a><h2>Details</h2>
<div class="refsect2">
<a name="HudQuery-struct"></a><h3>HudQuery</h3>
<pre class="programlisting">typedef struct _HudQuery HudQuery;</pre>
<p>
This is an opaque structure type.
</p>
</div>
<hr>
<div class="refsect2">
<a name="hud-query-close"></a><h3>hud_query_close ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                hud_query_close                     (<em class="parameter"><code><a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> *query</code></em>);</pre>
<p>
Closes a <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a>.
</p>
<p>
This drops the query from the internal list of queries.  Future use
of <a class="link" href="HudQuery.html#hud-query-lookup" title="hud_query_lookup ()"><code class="function">hud_query_lookup()</code></a> to find this query will fail.
</p>
<p>
You must still release your own reference on <em class="parameter"><code>query</code></em>, if you have one.
This only drops the internal reference.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>query</code></em> :</span></p></td>
<td>a <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="hud-query-get-n-results"></a><h3>hud_query_get_n_results ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="returnvalue">guint</span></a>               hud_query_get_n_results             (<em class="parameter"><code><a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> *query</code></em>);</pre>
<p>
Gets the number of results in <em class="parameter"><code>query</code></em>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>query</code></em> :</span></p></td>
<td>a <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the number of results</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="hud-query-get-query-key"></a><h3>hud_query_get_query_key ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-GVariant.html#GVariant"><span class="returnvalue">GVariant</span></a> *          hud_query_get_query_key             (<em class="parameter"><code><a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> *query</code></em>);</pre>
<p>
Returns the query key for <em class="parameter"><code>HudQuery</code></em>.
</p>
<p>
Each <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> has a unique identifying key that is assigned when the
query is created.
</p>
<p>
FIXME: This is a lie.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>query</code></em> :</span></p></td>
<td>a <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the query key for <em class="parameter"><code>query</code></em>. <span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="hud-query-get-result-by-index"></a><h3>hud_query_get_result_by_index ()</h3>
<pre class="programlisting"><a class="link" href="HudResult.html" title="HudResult"><span class="returnvalue">HudResult</span></a> *         hud_query_get_result_by_index       (<em class="parameter"><code><a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> *query</code></em>,
                                                         <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guint"><span class="type">guint</span></a> i</code></em>);</pre>
<p>
Gets the <em class="parameter"><code>i</code></em>th result from <em class="parameter"><code>query</code></em>.
</p>
<p>
<em class="parameter"><code>i</code></em> must be less than the number of results in the query.  See
<a class="link" href="HudQuery.html#hud-query-get-n-results" title="hud_query_get_n_results ()"><code class="function">hud_query_get_n_results()</code></a>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>query</code></em> :</span></p></td>
<td>a <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>i</code></em> :</span></p></td>
<td>the index of the result</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the <a class="link" href="HudResult.html" title="HudResult"><span class="type">HudResult</span></a> at position <em class="parameter"><code>i</code></em>. <span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="hud-query-lookup"></a><h3>hud_query_lookup ()</h3>
<pre class="programlisting"><a class="link" href="HudQuery.html" title="HudQuery"><span class="returnvalue">HudQuery</span></a> *          hud_query_lookup                    (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-GVariant.html#GVariant"><span class="type">GVariant</span></a> *query_key</code></em>);</pre>
<p>
Finds the query that has the given <em class="parameter"><code>query_key</code></em>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>query_key</code></em> :</span></p></td>
<td>a query key</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the query, or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> if no such query exists. <span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="hud-query-new"></a><h3>hud_query_new ()</h3>
<pre class="programlisting"><a class="link" href="HudQuery.html" title="HudQuery"><span class="returnvalue">HudQuery</span></a> *          hud_query_new                       (<em class="parameter"><code><a class="link" href="HudSource.html" title="HudSource"><span class="type">HudSource</span></a> *source</code></em>,
                                                         <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *search_string</code></em>,
                                                         <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"><span class="type">gint</span></a> num_results</code></em>);</pre>
<p>
Creates a <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a>.
</p>
<p>
A <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> is a stateful search for <em class="parameter"><code>search_string</code></em> against a <em class="parameter"><code>source</code></em>.
</p>
<p>
Each <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> is assigned a "query key" when it is created.  This
can be used to lookup the hud query later using <a class="link" href="HudQuery.html#hud-query-lookup" title="hud_query_lookup ()"><code class="function">hud_query_lookup()</code></a>.
Because of this, an internal reference is held on the query and the
query won't be completely freed until you call <a class="link" href="HudQuery.html#hud-query-close" title="hud_query_close ()"><code class="function">hud_query_close()</code></a> on
it in addition to releasing your ref.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>source</code></em> :</span></p></td>
<td>the <a class="link" href="HudSource.html" title="HudSource"><span class="type">HudSource</span></a> against which to search</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>search_string</code></em> :</span></p></td>
<td>the string to search for</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>num_results</code></em> :</span></p></td>
<td>the maximum number of results to report</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the new <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a>
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1">
<a name="HudQuery.signal-details"></a><h2>Signal Details</h2>
<div class="refsect2">
<a name="HudQuery-changed"></a><h3>The <code class="literal">"changed"</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                user_function                      (<a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a> *query,
                                                        <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a>  user_data)      : <a href="http://library.gnome.org/devel/gobject/unstable/gobject-Signals.html#G-SIGNAL-RUN-LAST:CAPS"><code class="literal">Run Last</code></a></pre>
<p>
Indicates that the results of <em class="parameter"><code>query</code></em> have changed.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>query</code></em> :</span></p></td>
<td>a <a class="link" href="HudQuery.html" title="HudQuery"><span class="type">HudQuery</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.18</div>
</body>
</html>